name: CI docker_build

on:
  workflow_run:
    workflows: ["Go"]
    types:
      - completed   

jobs: 

#Running unit tests
  Run_unit_tests:
    runs-on: self-hosted
    steps:
    - name: Running unit tests
      run: go test ./hello -v

#Docker image build using binary created      
  image_build:
    runs-on: self-hosted
    steps:
    - uses: actions/checkout@v2
    - name: Image bulid
      run: docker build -t go/hello .  
